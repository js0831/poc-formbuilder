(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{dXW6:function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=function(){return function(){}}(),o=t("pMnS"),i=t("Ip0R"),c=t("mrSG"),r=function(){function n(n,l){this.router=n,this.appService=l,this.list=[]}return n.prototype.ngOnInit=function(){return c.b(this,void 0,void 0,(function(){var n;return c.e(this,(function(l){switch(l.label){case 0:return[4,this.appService.getProductList().toPromise()];case 1:return n=l.sent(),this.list=n.data,console.log(this.list),[2]}}))}))},n.prototype.create=function(){this.router.navigate(["product","form"])},n.prototype.edit=function(n){this.router.navigate(["product","form",n])},n}(),s=t("ZYCi"),a=t("F5nt"),p=u.sb({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{margin:0;padding:3px;width:100%;font-weight:300}.header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{white-space:nowrap}.list[_ngcontent-%COMP%]{padding:10px 0;height:calc(100vh - 70px);box-sizing:border-box;overflow-y:auto;overflow-x:hidden}.actions[_ngcontent-%COMP%]{text-align:right}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}"]],data:{}});function d(n){return u.Ob(0,[(n()(),u.ub(0,0,null,null,13,"tr",[],null,null,null,null,null)),(n()(),u.ub(1,0,null,null,1,"th",[["scope","row"]],null,null,null,null,null)),(n()(),u.Mb(2,null,["",""])),(n()(),u.ub(3,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),u.Mb(4,null,["",""])),(n()(),u.ub(5,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),u.Mb(6,null,["",""])),(n()(),u.ub(7,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),u.Mb(8,null,["",""])),(n()(),u.ub(9,0,null,null,1,"td",[],null,null,null,null,null)),(n()(),u.Mb(10,null,["",""])),(n()(),u.ub(11,0,null,null,2,"td",[["class","actions"]],null,null,null,null,null)),(n()(),u.ub(12,0,null,null,1,"button",[["class","btn btn-sm btn-warning"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.edit(n.context.$implicit._id)&&u),u}),null,null)),(n()(),u.Mb(-1,null,["Edit"]))],null,(function(n,l){n(l,2,0,l.context.index+1),n(l,4,0,l.context.$implicit.information.productType.details.name),n(l,6,0,l.context.$implicit.information.code),n(l,8,0,l.context.$implicit.information.name),n(l,10,0,l.context.$implicit.information.description)}))}function b(n){return u.Ob(0,[(n()(),u.ub(0,0,null,null,5,"div",[["class","header"]],null,null,null,null,null)),(n()(),u.ub(1,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Product"])),(n()(),u.ub(3,0,null,null,2,"div",[],null,null,null,null,null)),(n()(),u.ub(4,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.create()&&u),u}),null,null)),(n()(),u.Mb(-1,null,["Add New"])),(n()(),u.ub(6,0,null,null,17,"div",[["class","list"]],null,null,null,null,null)),(n()(),u.ub(7,0,null,null,16,"table",[["class","table table-sm table-striped"]],null,null,null,null,null)),(n()(),u.ub(8,0,null,null,12,"thead",[["class","thead-dark"]],null,null,null,null,null)),(n()(),u.ub(9,0,null,null,11,"tr",[],null,null,null,null,null)),(n()(),u.ub(10,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(n()(),u.Mb(-1,null,["#"])),(n()(),u.ub(12,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Product Type"])),(n()(),u.ub(14,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Code"])),(n()(),u.ub(16,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Name"])),(n()(),u.ub(18,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(n()(),u.Mb(-1,null,["Description"])),(n()(),u.ub(20,0,null,null,0,"th",[["scope","col"]],null,null,null,null,null)),(n()(),u.ub(21,0,null,null,2,"tbody",[],null,null,null,null,null)),(n()(),u.jb(16777216,null,null,1,null,d)),u.tb(23,278528,null,0,i.j,[u.P,u.M,u.t],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,23,0,l.component.list)}),null)}function m(n){return u.Ob(0,[(n()(),u.ub(0,0,null,null,1,"app-product-catalog-page",[],null,null,null,b,p)),u.tb(1,114688,null,0,r,[s.k,a.a],null,null)],(function(n,l){n(l,1,0)}),null)}var h=u.qb("app-product-catalog-page",r,m,{},{},[]),f=t("YxIH"),g=t("Nsd2"),v=t("t/Na"),y=t("gIcY"),P=t("67Y/"),x=t("AytR"),M=function(){function n(n,l,t,u){this.router=n,this.appService=l,this.http=t,this.activatedRoute=u,this.reloadCommon=!1,this.reloadSpec=!1,this.subs=[],this.commonFields={model:{},form:new y.k({}),fields:[],options:{}},this.productSpecFields={model:{},form:new y.k({}),fields:[],options:{}}}return n.prototype.ngOnInit=function(){return c.b(this,void 0,void 0,(function(){var n,l,t=this;return c.e(this,(function(u){switch(u.label){case 0:return this.id=this.activatedRoute.snapshot.paramMap.get("id"),[4,this.getAllProductSpecs()];case 1:return n=u.sent(),[4,this.getCommonFormFields().toPromise()];case 2:return l=u.sent(),this.setProductTypeOptions(l,n),this.reloadCommonForm(l),this.id?this.id&&setTimeout((function(n){t.getProduct(t.id)}),300):this.watchProductTypeOnChange(),[2]}}))}))},n.prototype.getProduct=function(n){return c.b(this,void 0,void 0,(function(){var l,t,u=this;return c.e(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,this.appService.getProduct(n).toPromise()];case 1:return l=e.sent().data,this.name=l.information.name,this.productType=l.information.productType,this.commonFields.form.patchValue({information:l.information}),[4,this.appService.getSpec(l.specsForm._id).toPromise()];case 2:return t=e.sent(),this.spec=t.data,this.reloadSpecForm(this.spec.json),setTimeout((function(n){u.productSpecFields.form.patchValue(l.specs)}),500),[3,4];case 3:return e.sent(),alert("Product do not Exist"),this.cancel(),[3,4];case 4:return[2]}}))}))},n.prototype.watchProductTypeOnChange=function(){var n=this;setTimeout((function(){n.subs.push(n.commonFields.form.get("information").get("productType").valueChanges.subscribe((function(l){l&&n.getProductSpecFields(l)})))}),300)},n.prototype.setProductTypeOptions=function(n,l){var t=n[0].fieldGroup[0].fieldGroup[0].fieldGroup[0].templateOptions;t.options=l,t.disabled=!!this.id},n.prototype.getAllProductSpecs=function(){return this.appService.getProductSpecList("PRODUCT_TYPE").pipe(Object(P.a)((function(n){return n.data.map((function(n){return{label:n.details.name,id:n._id}}))}))).toPromise()},n.prototype.getCommonFormFields=function(){return this.http.get("/assets/json/product-common-fields.json")},n.prototype.getProductSpecFields=function(n){return c.b(this,void 0,void 0,(function(){var l;return c.e(this,(function(t){switch(t.label){case 0:return[4,this.appService.getProductSpec(n).toPromise()];case 1:return l=t.sent(),this.spec=l.data.spec,console.log(this.spec),this.reloadSpecForm(this.spec.json),[2]}}))}))},n.prototype.reloadCommonForm=function(n){var l=this;this.reloadCommon=!1,this.commonFields.fields=n,setTimeout((function(n){l.reloadCommon=!0}),250)},n.prototype.reloadSpecForm=function(n){var l=this;this.reloadSpec=!1,this.productSpecFields.fields=n,setTimeout((function(n){l.reloadSpec=!0}),250)},n.prototype.cancel=function(){this.router.navigate(["product","list"])},n.prototype.save=function(){var n=this;if(this.commonFields.form.invalid||this.productSpecFields.form.invalid)return this.productSpecFields.form.markAllAsTouched(),void this.commonFields.form.markAllAsTouched();var l=c.a({},this.commonFields.form.value,{specs:this.productSpecFields.form.value,specsForm:this.spec._id});this.id?this.updateProduct(l):this.http.post(x.a.apiURL+"product",l).subscribe((function(l){n.commonFields.form.reset(),n.productSpecFields.form.reset(),alert("Success")}))},n.prototype.updateProduct=function(n){var l=this,t=c.a({},n,{information:c.a({},n.information,{productType:this.productType})});this.http.put(x.a.apiURL+"product/update/"+this.id,t).subscribe((function(n){l.name=n.data.information.name,alert("Update successful")}))},n.prototype.ngOnDestroy=function(){this.subs.forEach((function(n){return n.unsubscribe()}))},n}(),k=u.sb({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{margin:0;padding:3px;width:100%;font-weight:300}.header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;border-bottom:1px solid #eee}.header[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.header[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:5px}.form[_ngcontent-%COMP%]{padding:10px 0;height:calc(100vh - 70px);box-sizing:border-box;overflow-y:auto;overflow-x:hidden}"]],data:{}});function E(n){return u.Ob(0,[(n()(),u.ub(0,0,null,null,2,"ng-jk-form-builder",[],null,null,null,f.b,f.a)),u.Jb(512,null,g.c,g.c,[v.c,g.d]),u.tb(2,245760,null,0,g.a,[g.c],{editable:[0,"editable"],config:[1,"config"]},null)],(function(n,l){n(l,2,0,!1,l.component.commonFields)}),null)}function w(n){return u.Ob(0,[(n()(),u.ub(0,0,null,null,2,"ng-jk-form-builder",[],null,null,null,f.b,f.a)),u.Jb(512,null,g.c,g.c,[v.c,g.d]),u.tb(2,245760,null,0,g.a,[g.c],{editable:[0,"editable"],config:[1,"config"]},null)],(function(n,l){n(l,2,0,!1,l.component.productSpecFields)}),null)}function O(n){return u.Ob(0,[(n()(),u.ub(0,0,null,null,7,"div",[["class","header"]],null,null,null,null,null)),(n()(),u.ub(1,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),u.Mb(2,null,["",""])),(n()(),u.ub(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(n()(),u.ub(4,0,null,null,1,"button",[["class","btn btn-secondary"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.cancel()&&u),u}),null,null)),(n()(),u.Mb(-1,null,["Cancel"])),(n()(),u.ub(6,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.save()&&u),u}),null,null)),(n()(),u.Mb(7,null,["",""])),(n()(),u.ub(8,0,null,null,4,"div",[["class","form"]],null,null,null,null,null)),(n()(),u.jb(16777216,null,null,1,null,E)),u.tb(10,16384,null,0,i.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null),(n()(),u.jb(16777216,null,null,1,null,w)),u.tb(12,16384,null,0,i.k,[u.P,u.M],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,10,0,t.reloadCommon),n(l,12,0,t.reloadSpec)}),(function(n,l){var t=l.component;n(l,2,0,t.id?t.name:"New Product"),n(l,7,0,t.id?"Update":"Save")}))}function F(n){return u.Ob(0,[(n()(),u.ub(0,0,null,null,1,"app-product-catalog-form",[],null,null,null,O,k)),u.tb(1,245760,null,0,M,[s.k,a.a,v.c,s.a],null,null)],(function(n,l){n(l,1,0)}),null)}var C=u.qb("app-product-catalog-form",M,F,{},{},[]),S=t("YImT"),T=t("vZwA"),_=function(){return function(){}}();t.d(l,"ProductCatalogModuleNgFactory",(function(){return j}));var j=u.rb(e,[],(function(n){return u.Db([u.Eb(512,u.j,u.cb,[[8,[o.a,h,C,S.e,S.f,f.f,f.g,f.h,f.i,f.l,f.j,f.k,f.m,f.n,f.c,f.d,f.e]],[3,u.j],u.y]),u.Eb(4608,i.m,i.l,[u.v,[2,i.x]]),u.Eb(4608,y.A,y.A,[]),u.Eb(4608,y.g,y.g,[]),u.Eb(4608,v.h,v.n,[i.d,u.C,v.l]),u.Eb(4608,v.o,v.o,[v.h,v.m]),u.Eb(5120,v.a,(function(n){return[n]}),[v.o]),u.Eb(4608,v.k,v.k,[]),u.Eb(6144,v.i,null,[v.k]),u.Eb(4608,v.g,v.g,[v.i]),u.Eb(6144,v.b,null,[v.g]),u.Eb(4608,v.f,v.j,[v.b,u.r]),u.Eb(4608,v.c,v.c,[v.f]),u.Eb(4608,T.h,T.h,[T.e,u.j,u.r]),u.Eb(4608,g.c,g.c,[v.c,g.d]),u.Eb(1073742336,i.c,i.c,[]),u.Eb(1073742336,s.l,s.l,[[2,s.q],[2,s.k]]),u.Eb(1073742336,_,_,[]),u.Eb(1073742336,y.z,y.z,[]),u.Eb(1073742336,y.m,y.m,[]),u.Eb(1073742336,y.v,y.v,[]),u.Eb(512,T.e,T.e,[]),u.Eb(1024,T.a,(function(n){return[T.j(n),{types:[{name:"input",component:g.v},{name:"textarea",component:g.w},{name:"select",component:g.x},{name:"select_multiple",component:g.y},{name:"radio",component:g.B},{name:"checkbox",component:g.z},{name:"checkboxes",component:g.A},{name:"blank",component:g.C},{name:"form",component:g.D},{name:"text_paragraph",component:g.e},{name:"text_header",component:g.f}],wrappers:[{name:"form-group",component:g.g}],validationMessages:[{name:"required",message:"This field is required"},{name:"minlength",message:g.o},{name:"maxlength",message:g.p},{name:"min",message:g.q},{name:"max",message:g.r},{name:"pattern",message:g.s}]}]}),[T.e]),u.Eb(1073742336,T.i,T.i,[T.e,[2,T.a]]),u.Eb(1073742336,v.e,v.e,[]),u.Eb(1073742336,v.d,v.d,[]),u.Eb(1073742336,g.t,g.t,[]),u.Eb(1073742336,g.b,g.b,[]),u.Eb(1073742336,e,e,[]),u.Eb(1024,s.i,(function(){return[[{path:"list",component:r},{path:"form",component:M},{path:"form/:id",component:M},{path:"",redirectTo:"list",pathMatch:"full"}]]}),[]),u.Eb(256,v.l,"XSRF-TOKEN",[]),u.Eb(256,v.m,"X-XSRF-TOKEN",[]),u.Eb(256,g.d,{apiURL:"https://app-form-builder-poc-api.herokuapp.com/product/spec/json/"},[])])}))}}]);