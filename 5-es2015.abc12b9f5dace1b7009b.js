(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{dXW6:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class u{}var o=t("pMnS"),i=t("SVse"),s=t("mrSG");class c{constructor(l,n,t){this.router=l,this.appService=n,this.jkWait=t,this.list=[]}ngOnInit(){return s.a(this,void 0,void 0,(function*(){this.jkWait.start();const l=yield this.appService.getProductList().toPromise();this.list=l.data,this.jkWait.end()}))}create(){this.router.navigate(["product","form"])}edit(l){this.router.navigate(["product","form",l])}}var a=t("iInd"),r=t("F5nt"),d=t("tTnG"),p=e.qb({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{margin:0;padding:3px;width:100%;font-weight:300}.header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{white-space:nowrap}.list[_ngcontent-%COMP%]{padding:10px 0;height:calc(100vh - 70px);box-sizing:border-box;overflow-y:auto;overflow-x:hidden}.actions[_ngcontent-%COMP%]{text-align:right}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}"]],data:{}});function m(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,13,"tr",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"th",[["scope","row"]],null,null,null,null,null)),(l()(),e.Kb(2,null,["",""])),(l()(),e.sb(3,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(4,null,["",""])),(l()(),e.sb(5,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(6,null,["",""])),(l()(),e.sb(7,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(8,null,["",""])),(l()(),e.sb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(10,null,["",""])),(l()(),e.sb(11,0,null,null,2,"td",[["class","actions"]],null,null,null,null,null)),(l()(),e.sb(12,0,null,null,1,"button",[["class","btn btn-sm btn-warning"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.edit(l.context.$implicit._id)&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Edit"]))],null,(function(l,n){l(n,2,0,n.context.index+1),l(n,4,0,n.context.$implicit.information.productType.details.name),l(n,6,0,n.context.$implicit.information.code),l(n,8,0,n.context.$implicit.information.name),l(n,10,0,n.context.$implicit.information.description)}))}function b(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,5,"div",[["class","header"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Products"])),(l()(),e.sb(3,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.create()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Add New"])),(l()(),e.sb(6,0,null,null,17,"div",[["class","list"]],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,16,"table",[["class","table table-sm table-striped"]],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,12,"thead",[["class","thead-dark"]],null,null,null,null,null)),(l()(),e.sb(9,0,null,null,11,"tr",[],null,null,null,null,null)),(l()(),e.sb(10,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["#"])),(l()(),e.sb(12,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Product Type"])),(l()(),e.sb(14,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Code"])),(l()(),e.sb(16,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Name"])),(l()(),e.sb(18,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Description"])),(l()(),e.sb(20,0,null,null,0,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.sb(21,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,m)),e.rb(23,278528,null,0,i.j,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,23,0,n.component.list)}),null)}function h(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,1,"app-product-catalog-page",[],null,null,null,b,p)),e.rb(1,114688,null,0,c,[a.k,r.a,d.c],null,null)],(function(l,n){l(n,1,0)}),null)}var f=e.ob("app-product-catalog-page",c,h,{},{},[]),g=t("YxIH"),v=t("TZ93"),C=t("IheW"),k=t("s7LF"),P=t("lJxs"),x=t("AytR");class F{constructor(l,n,t,e,u){this.router=l,this.appService=n,this.http=t,this.activatedRoute=e,this.jkWait=u,this.reloadCommon=!1,this.reloadSpec=!1,this.subs=[],this.commonFields={model:{},form:new k.k({}),fields:[],options:{}},this.productSpecFields={model:{},form:new k.k({}),fields:[],options:{}}}ngOnInit(){return s.a(this,void 0,void 0,(function*(){this.jkWait.start(),this.id=this.activatedRoute.snapshot.paramMap.get("id");const l=yield this.getAllProductSpecs(),n=yield this.getCommonFormFields().toPromise();this.setProductTypeOptions(n,l),this.reloadCommonForm(n),this.jkWait.end(),this.id?this.id&&setTimeout(l=>{this.getProduct(this.id)},300):this.watchProductTypeOnChange()}))}getProduct(l){return s.a(this,void 0,void 0,(function*(){try{this.jkWait.start(),this.product=(yield this.appService.getProduct(l).toPromise()).data,this.commonFields.form.patchValue({information:this.product.information});const n=yield this.appService.getSpec(this.product.specsForm._id).toPromise();this.spec=n.data,this.reloadSpecForm(this.spec.json),this.jkWait.end()}catch(n){this.jkWait.end(),alert("Product do not Exist"),this.cancel()}}))}watchProductTypeOnChange(){setTimeout(()=>{this.subs.push(this.commonFields.form.get("information").get("productType").valueChanges.subscribe(l=>{l&&this.getProductSpecFields(l)}))},300)}setProductTypeOptions(l,n){const t=l[0].fieldGroup[0].fieldGroup[0].fieldGroup[0].templateOptions;t.options=n,t.disabled=!!this.id}getAllProductSpecs(){return this.appService.getProductSpecList("PRODUCT_TYPE").pipe(Object(P.a)(l=>l.data.map(l=>({label:l.details.name,id:l._id})))).toPromise()}getCommonFormFields(){return this.http.get("/assets/json/product-common-fields.json")}getProductSpecFields(l){return s.a(this,void 0,void 0,(function*(){this.jkWait.start();const n=yield this.appService.getProductSpec(l).toPromise();this.spec=n.data.spec,this.reloadSpecForm(this.spec.json),this.jkWait.end()}))}reloadCommonForm(l){this.reloadCommon=!1,this.commonFields.fields=l,setTimeout(l=>{this.reloadCommon=!0},250)}reloadSpecForm(l){this.reloadSpec=!1,this.productSpecFields.fields=l,setTimeout(l=>{this.reloadSpec=!0},250)}cancel(){this.router.navigate(["product","list"])}save(){if(this.commonFields.form.invalid||this.productSpecFields.form.invalid)return this.productSpecFields.form.markAllAsTouched(),void this.commonFields.form.markAllAsTouched();this.jkWait.start();const l=Object.assign({},this.commonFields.form.value,{specs:this.productSpecFields.form.value,specsForm:this.spec._id});this.id?this.updateProduct(l):this.http.post(`${x.a.apiURL}product`,l).subscribe(l=>{this.jkWait.end(),this.commonFields.form.reset(),this.productSpecFields.form.reset(),alert("Success")})}updateProduct(l){const n=Object.assign({},l,{information:Object.assign({},l.information,{productType:this.product.information.productType})});this.http.put(`${x.a.apiURL}product/update/${this.id}`,n).subscribe(l=>{this.product.information.name=l.data.information.name,this.jkWait.end(),alert("Update successful")})}formEvents(l){"FORM_LOADED"===l.name&&setTimeout(l=>{this.productSpecFields.form.patchValue(this.product.specs),this.jkWait.end()},300)}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}}var y=e.qb({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{margin:0;padding:3px;width:100%;font-weight:300}.header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;border-bottom:1px solid #eee}.header[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.header[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:5px}.form[_ngcontent-%COMP%]{padding:10px 0;height:calc(100vh - 70px);box-sizing:border-box;overflow-y:auto;overflow-x:hidden}"]],data:{}});function S(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,2,"ng-jk-form-builder",[],null,null,null,g.b,g.a)),e.Hb(512,null,v.c,v.c,[C.c,v.d]),e.rb(2,245760,null,0,v.a,[v.c],{editable:[0,"editable"],config:[1,"config"]},null)],(function(l,n){l(n,2,0,!1,n.component.commonFields)}),null)}function j(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,2,"ng-jk-form-builder",[],null,[[null,"event"]],(function(l,n,t){var e=!0;return"event"===n&&(e=!1!==l.component.formEvents(t)&&e),e}),g.b,g.a)),e.Hb(512,null,v.c,v.c,[C.c,v.d]),e.rb(2,245760,null,0,v.a,[v.c],{editable:[0,"editable"],config:[1,"config"]},{event:"event"})],(function(l,n){l(n,2,0,!1,n.component.productSpecFields)}),null)}function O(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,7,"div",[["class","header"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),e.Kb(2,null,["",""])),(l()(),e.sb(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"button",[["class","btn btn-secondary"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.cancel()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.sb(6,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.save()&&e),e}),null,null)),(l()(),e.Kb(7,null,["",""])),(l()(),e.sb(8,0,null,null,4,"div",[["class","form"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,S)),e.rb(10,16384,null,0,i.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,j)),e.rb(12,16384,null,0,i.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,10,0,t.reloadCommon),l(n,12,0,t.reloadSpec)}),(function(l,n){var t=n.component;l(n,2,0,t.id?null==t.product?null:t.product.information.name:"New Product"),l(n,7,0,t.id?"Update":"Save")}))}function w(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,1,"app-product-catalog-form",[],null,null,null,O,y)),e.rb(1,245760,null,0,F,[a.k,r.a,C.c,a.a,d.c],null,null)],(function(l,n){l(n,1,0)}),null)}var M=e.ob("app-product-catalog-form",F,w,{},{},[]),T=t("YImT"),_=t("0fkH");class K{}t.d(n,"ProductCatalogModuleNgFactory",(function(){return W}));var W=e.pb(u,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[o.a,f,M,T.e,T.f,g.f,g.g,g.h,g.i,g.l,g.j,g.k,g.m,g.n,g.c,g.d,g.e]],[3,e.j],e.w]),e.Cb(4608,i.m,i.l,[e.t,[2,i.A]]),e.Cb(4608,k.A,k.A,[]),e.Cb(4608,k.g,k.g,[]),e.Cb(4608,C.h,C.n,[i.d,e.A,C.l]),e.Cb(4608,C.o,C.o,[C.h,C.m]),e.Cb(5120,C.a,(function(l){return[l]}),[C.o]),e.Cb(4608,C.k,C.k,[]),e.Cb(6144,C.i,null,[C.k]),e.Cb(4608,C.g,C.g,[C.i]),e.Cb(6144,C.b,null,[C.g]),e.Cb(4608,C.f,C.j,[C.b,e.q]),e.Cb(4608,C.c,C.c,[C.f]),e.Cb(4608,_.h,_.h,[_.e,e.j,e.q]),e.Cb(4608,v.c,v.c,[C.c,v.d]),e.Cb(1073742336,i.c,i.c,[]),e.Cb(1073742336,a.l,a.l,[[2,a.q],[2,a.k]]),e.Cb(1073742336,K,K,[]),e.Cb(1073742336,k.z,k.z,[]),e.Cb(1073742336,k.m,k.m,[]),e.Cb(1073742336,k.v,k.v,[]),e.Cb(512,_.e,_.e,[]),e.Cb(1024,_.a,(function(l){return[_.j(l),{types:[{name:"input",component:v.v},{name:"textarea",component:v.w},{name:"select",component:v.x},{name:"select_multiple",component:v.y},{name:"radio",component:v.B},{name:"checkbox",component:v.z},{name:"checkboxes",component:v.A},{name:"blank",component:v.C},{name:"form",component:v.D},{name:"text_paragraph",component:v.e},{name:"text_header",component:v.f}],wrappers:[{name:"form-group",component:v.g}],validationMessages:[{name:"required",message:"This field is required"},{name:"minlength",message:v.o},{name:"maxlength",message:v.p},{name:"min",message:v.q},{name:"max",message:v.r},{name:"pattern",message:v.s}]}]}),[_.e]),e.Cb(1073742336,_.i,_.i,[_.e,[2,_.a]]),e.Cb(1073742336,C.e,C.e,[]),e.Cb(1073742336,C.d,C.d,[]),e.Cb(1073742336,v.t,v.t,[]),e.Cb(1073742336,v.b,v.b,[]),e.Cb(1073742336,u,u,[]),e.Cb(1024,a.i,(function(){return[[{path:"list",component:c},{path:"form",component:F},{path:"form/:id",component:F},{path:"",redirectTo:"list",pathMatch:"full"}]]}),[]),e.Cb(256,C.l,"XSRF-TOKEN",[]),e.Cb(256,C.m,"X-XSRF-TOKEN",[]),e.Cb(256,v.d,{apiURL:"https://app-form-builder-poc-api.herokuapp.com/product/spec/json/"},[])])}))}}]);