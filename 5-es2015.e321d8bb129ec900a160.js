(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{dXW6:function(l,n,t){"use strict";t.r(n);var e=t("8Y7J");class u{}var o=t("pMnS"),i=t("SVse"),s=t("mrSG");class c{constructor(l,n){this.router=l,this.appService=n,this.list=[]}ngOnInit(){return s.a(this,void 0,void 0,(function*(){const l=yield this.appService.getProductList().toPromise();this.list=l.data,console.log(this.list)}))}create(){this.router.navigate(["product","form"])}edit(l){this.router.navigate(["product","form",l])}}var a=t("iInd"),r=t("F5nt"),d=e.qb({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{margin:0;padding:3px;width:100%;font-weight:300}.header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center}.header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{white-space:nowrap}.list[_ngcontent-%COMP%]{padding:10px 0;height:calc(100vh - 70px);box-sizing:border-box;overflow-y:auto;overflow-x:hidden}.actions[_ngcontent-%COMP%]{text-align:right}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}"]],data:{}});function p(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,13,"tr",[],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"th",[["scope","row"]],null,null,null,null,null)),(l()(),e.Kb(2,null,["",""])),(l()(),e.sb(3,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(4,null,["",""])),(l()(),e.sb(5,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(6,null,["",""])),(l()(),e.sb(7,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(8,null,["",""])),(l()(),e.sb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),e.Kb(10,null,["",""])),(l()(),e.sb(11,0,null,null,2,"td",[["class","actions"]],null,null,null,null,null)),(l()(),e.sb(12,0,null,null,1,"button",[["class","btn btn-sm btn-warning"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.edit(l.context.$implicit._id)&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Edit"]))],null,(function(l,n){l(n,2,0,n.context.index+1),l(n,4,0,n.context.$implicit.information.productType.details.name),l(n,6,0,n.context.$implicit.information.code),l(n,8,0,n.context.$implicit.information.name),l(n,10,0,n.context.$implicit.information.description)}))}function b(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,5,"div",[["class","header"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Product"])),(l()(),e.sb(3,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.create()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Add New"])),(l()(),e.sb(6,0,null,null,17,"div",[["class","list"]],null,null,null,null,null)),(l()(),e.sb(7,0,null,null,16,"table",[["class","table table-sm table-striped"]],null,null,null,null,null)),(l()(),e.sb(8,0,null,null,12,"thead",[["class","thead-dark"]],null,null,null,null,null)),(l()(),e.sb(9,0,null,null,11,"tr",[],null,null,null,null,null)),(l()(),e.sb(10,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["#"])),(l()(),e.sb(12,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Product Type"])),(l()(),e.sb(14,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Code"])),(l()(),e.sb(16,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Name"])),(l()(),e.sb(18,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Kb(-1,null,["Description"])),(l()(),e.sb(20,0,null,null,0,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.sb(21,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,p)),e.rb(23,278528,null,0,i.j,[e.N,e.K,e.r],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,23,0,n.component.list)}),null)}function m(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,1,"app-product-catalog-page",[],null,null,null,b,d)),e.rb(1,114688,null,0,c,[a.k,r.a],null,null)],(function(l,n){l(n,1,0)}),null)}var h=e.ob("app-product-catalog-page",c,m,{},{},[]),f=t("YxIH"),g=t("TZ93"),C=t("IheW"),v=t("s7LF"),x=t("lJxs"),P=t("AytR");class k{constructor(l,n,t,e){this.router=l,this.appService=n,this.http=t,this.activatedRoute=e,this.reloadCommon=!1,this.reloadSpec=!1,this.subs=[],this.commonFields={model:{},form:new v.k({}),fields:[],options:{}},this.productSpecFields={model:{},form:new v.k({}),fields:[],options:{}}}ngOnInit(){return s.a(this,void 0,void 0,(function*(){this.id=this.activatedRoute.snapshot.paramMap.get("id");const l=yield this.getAllProductSpecs(),n=yield this.getCommonFormFields().toPromise();this.setProductTypeOptions(n,l),this.reloadCommonForm(n),this.id?this.id&&setTimeout(l=>{this.getProduct(this.id)},300):this.watchProductTypeOnChange()}))}getProduct(l){return s.a(this,void 0,void 0,(function*(){try{const n=(yield this.appService.getProduct(l).toPromise()).data;this.name=n.information.name,this.productType=n.information.productType,this.commonFields.form.patchValue({information:n.information});const t=yield this.appService.getSpec(n.specsForm._id).toPromise();this.spec=t.data,this.reloadSpecForm(this.spec.json),setTimeout(l=>{this.productSpecFields.form.patchValue(n.specs)},500)}catch(n){alert("Product do not Exist"),this.cancel()}}))}watchProductTypeOnChange(){setTimeout(()=>{this.subs.push(this.commonFields.form.get("information").get("productType").valueChanges.subscribe(l=>{l&&this.getProductSpecFields(l)}))},300)}setProductTypeOptions(l,n){const t=l[0].fieldGroup[0].fieldGroup[0].fieldGroup[0].templateOptions;t.options=n,t.disabled=!!this.id}getAllProductSpecs(){return this.appService.getProductSpecList("PRODUCT_TYPE").pipe(Object(x.a)(l=>l.data.map(l=>({label:l.details.name,id:l._id})))).toPromise()}getCommonFormFields(){return this.http.get("/assets/json/product-common-fields.json")}getProductSpecFields(l){return s.a(this,void 0,void 0,(function*(){const n=yield this.appService.getProductSpec(l).toPromise();this.spec=n.data.spec,console.log(this.spec),this.reloadSpecForm(this.spec.json)}))}reloadCommonForm(l){this.reloadCommon=!1,this.commonFields.fields=l,setTimeout(l=>{this.reloadCommon=!0},250)}reloadSpecForm(l){this.reloadSpec=!1,this.productSpecFields.fields=l,setTimeout(l=>{this.reloadSpec=!0},250)}cancel(){this.router.navigate(["product","list"])}save(){if(this.commonFields.form.invalid||this.productSpecFields.form.invalid)return this.productSpecFields.form.markAllAsTouched(),void this.commonFields.form.markAllAsTouched();const l=Object.assign({},this.commonFields.form.value,{specs:this.productSpecFields.form.value,specsForm:this.spec._id});this.id?this.updateProduct(l):this.http.post(`${P.a.apiURL}product`,l).subscribe(l=>{this.commonFields.form.reset(),this.productSpecFields.form.reset(),alert("Success")})}updateProduct(l){const n=Object.assign({},l,{information:Object.assign({},l.information,{productType:this.productType})});this.http.put(`${P.a.apiURL}product/update/${this.id}`,n).subscribe(l=>{this.name=l.data.information.name,alert("Update successful")})}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}}var y=e.qb({encapsulation:0,styles:[["h1[_ngcontent-%COMP%]{margin:0;padding:3px;width:100%;font-weight:300}.header[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;border-bottom:1px solid #eee}.header[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.header[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:5px}.form[_ngcontent-%COMP%]{padding:10px 0;height:calc(100vh - 70px);box-sizing:border-box;overflow-y:auto;overflow-x:hidden}"]],data:{}});function F(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,2,"ng-jk-form-builder",[],null,null,null,f.b,f.a)),e.Hb(512,null,g.c,g.c,[C.c,g.d]),e.rb(2,245760,null,0,g.a,[g.c],{editable:[0,"editable"],config:[1,"config"]},null)],(function(l,n){l(n,2,0,!1,n.component.commonFields)}),null)}function S(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,2,"ng-jk-form-builder",[],null,null,null,f.b,f.a)),e.Hb(512,null,g.c,g.c,[C.c,g.d]),e.rb(2,245760,null,0,g.a,[g.c],{editable:[0,"editable"],config:[1,"config"]},null)],(function(l,n){l(n,2,0,!1,n.component.productSpecFields)}),null)}function w(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,7,"div",[["class","header"]],null,null,null,null,null)),(l()(),e.sb(1,0,null,null,1,"h1",[],null,null,null,null,null)),(l()(),e.Kb(2,null,["",""])),(l()(),e.sb(3,0,null,null,4,"div",[["class","buttons"]],null,null,null,null,null)),(l()(),e.sb(4,0,null,null,1,"button",[["class","btn btn-secondary"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.cancel()&&e),e}),null,null)),(l()(),e.Kb(-1,null,["Cancel"])),(l()(),e.sb(6,0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.save()&&e),e}),null,null)),(l()(),e.Kb(7,null,["",""])),(l()(),e.sb(8,0,null,null,4,"div",[["class","form"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,F)),e.rb(10,16384,null,0,i.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null),(l()(),e.hb(16777216,null,null,1,null,S)),e.rb(12,16384,null,0,i.k,[e.N,e.K],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,10,0,t.reloadCommon),l(n,12,0,t.reloadSpec)}),(function(l,n){var t=n.component;l(n,2,0,t.id?t.name:"New Product"),l(n,7,0,t.id?"Update":"Save")}))}function O(l){return e.Mb(0,[(l()(),e.sb(0,0,null,null,1,"app-product-catalog-form",[],null,null,null,w,y)),e.rb(1,245760,null,0,k,[a.k,r.a,C.c,a.a],null,null)],(function(l,n){l(n,1,0)}),null)}var M=e.ob("app-product-catalog-form",k,O,{},{},[]),T=t("YImT"),_=t("0fkH");class K{}t.d(n,"ProductCatalogModuleNgFactory",(function(){return j}));var j=e.pb(u,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[o.a,h,M,T.e,T.f,f.f,f.g,f.h,f.i,f.l,f.j,f.k,f.m,f.n,f.c,f.d,f.e]],[3,e.j],e.w]),e.Cb(4608,i.m,i.l,[e.t,[2,i.x]]),e.Cb(4608,v.A,v.A,[]),e.Cb(4608,v.g,v.g,[]),e.Cb(4608,C.h,C.n,[i.d,e.A,C.l]),e.Cb(4608,C.o,C.o,[C.h,C.m]),e.Cb(5120,C.a,(function(l){return[l]}),[C.o]),e.Cb(4608,C.k,C.k,[]),e.Cb(6144,C.i,null,[C.k]),e.Cb(4608,C.g,C.g,[C.i]),e.Cb(6144,C.b,null,[C.g]),e.Cb(4608,C.f,C.j,[C.b,e.q]),e.Cb(4608,C.c,C.c,[C.f]),e.Cb(4608,_.h,_.h,[_.e,e.j,e.q]),e.Cb(4608,g.c,g.c,[C.c,g.d]),e.Cb(1073742336,i.c,i.c,[]),e.Cb(1073742336,a.l,a.l,[[2,a.q],[2,a.k]]),e.Cb(1073742336,K,K,[]),e.Cb(1073742336,v.z,v.z,[]),e.Cb(1073742336,v.m,v.m,[]),e.Cb(1073742336,v.v,v.v,[]),e.Cb(512,_.e,_.e,[]),e.Cb(1024,_.a,(function(l){return[_.j(l),{types:[{name:"input",component:g.v},{name:"textarea",component:g.w},{name:"select",component:g.x},{name:"select_multiple",component:g.y},{name:"radio",component:g.B},{name:"checkbox",component:g.z},{name:"checkboxes",component:g.A},{name:"blank",component:g.C},{name:"form",component:g.D},{name:"text_paragraph",component:g.e},{name:"text_header",component:g.f}],wrappers:[{name:"form-group",component:g.g}],validationMessages:[{name:"required",message:"This field is required"},{name:"minlength",message:g.o},{name:"maxlength",message:g.p},{name:"min",message:g.q},{name:"max",message:g.r},{name:"pattern",message:g.s}]}]}),[_.e]),e.Cb(1073742336,_.i,_.i,[_.e,[2,_.a]]),e.Cb(1073742336,C.e,C.e,[]),e.Cb(1073742336,C.d,C.d,[]),e.Cb(1073742336,g.t,g.t,[]),e.Cb(1073742336,g.b,g.b,[]),e.Cb(1073742336,u,u,[]),e.Cb(1024,a.i,(function(){return[[{path:"list",component:c},{path:"form",component:k},{path:"form/:id",component:k},{path:"",redirectTo:"list",pathMatch:"full"}]]}),[]),e.Cb(256,C.l,"XSRF-TOKEN",[]),e.Cb(256,C.m,"X-XSRF-TOKEN",[]),e.Cb(256,g.d,{apiURL:"https://app-form-builder-poc-api.herokuapp.com/product/spec/json/"},[])])}))}}]);